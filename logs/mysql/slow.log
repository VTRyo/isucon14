/usr/sbin/mysqld, Version: 8.0.40-0ubuntu0.24.04.1 ((Ubuntu)). started with:
Tcp port: 3306  Unix socket: /var/run/mysqld/mysqld.sock
Time                 Id Command    Argument
# Time: 2024-12-08T05:54:33.364842Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    15
# Query_time: 0.161560  Lock_time: 0.000003 Rows_sent: 100  Rows_examined: 179
use isuride;
SET timestamp=1733637273;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JDFEDF00B09BNMV8MP0RB34G';
# Time: 2024-12-08T05:54:35.039464Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    12
# Query_time: 0.018875  Lock_time: 0.000004 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637275;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:35.885069Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    35
# Query_time: 0.008571  Lock_time: 0.000001 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637275;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:35.992119Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    20
# Query_time: 0.001397  Lock_time: 0.000002 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637275;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.032289Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    63
# Query_time: 0.001349  Lock_time: 0.000004 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.042672Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    62
# Query_time: 0.005563  Lock_time: 0.000002 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.068762Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    53
# Query_time: 0.005647  Lock_time: 0.000002 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.143477Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    25
# Query_time: 0.001443  Lock_time: 0.000002 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.147637Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    24
# Query_time: 0.001335  Lock_time: 0.000002 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:54:36.248235Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    33
# Query_time: 0.001358  Lock_time: 0.000003 Rows_sent: 520  Rows_examined: 520
SET timestamp=1733637276;
SELECT * FROM chairs;
# Time: 2024-12-08T05:55:33.364928Z
# User@Host: [] @  []  Id:    30
# Query_time: 192.241022  Lock_time: 0.002229 Rows_sent: 1  Rows_examined: 1
SET timestamp=1733637333;
throttle:        311 'index not used' warning(s) suppressed.;
# Time: 2024-12-08T05:55:33.604533Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    77
# Query_time: 0.000511  Lock_time: 0.000002 Rows_sent: 1  Rows_examined: 0
SET timestamp=1733637333;
SELECT COUNT(*) = 0 FROM (SELECT COUNT(chair_sent_at) = 6 AS completed FROM ride_statuses WHERE ride_id IN (SELECT id FROM rides WHERE chair_id = '01JEJDAX31WSY6FY19HRPECH44') GROUP BY ride_id) is_completed WHERE completed = FALSE;
# Time: 2024-12-08T05:55:33.633006Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    50
# Query_time: 0.008234  Lock_time: 0.000002 Rows_sent: 537  Rows_examined: 537
SET timestamp=1733637333;
SELECT * FROM chairs;
# Time: 2024-12-08T05:55:34.261097Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    27
# Query_time: 2.128549  Lock_time: 0.000003 Rows_sent: 7  Rows_examined: 14
SET timestamp=1733637332;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JEJDAX2P4J2507ZF8NNCJ55V';
# Time: 2024-12-08T05:55:34.280645Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    45
# Query_time: 2.153677  Lock_time: 0.000003 Rows_sent: 8  Rows_examined: 16
SET timestamp=1733637332;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JEJDAWY8Q0H0HYCB02N0BZ55';
# Time: 2024-12-08T05:55:34.301936Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    10
# Query_time: 2.178551  Lock_time: 0.000002 Rows_sent: 7  Rows_examined: 14
SET timestamp=1733637332;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JEJDAX4MZ8A9VP48Y4506K16';
# Time: 2024-12-08T05:55:34.302576Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    32
# Query_time: 2.177392  Lock_time: 0.000002 Rows_sent: 7  Rows_examined: 14
SET timestamp=1733637332;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JEJDAWRVH1SSRXVVVHDJ1C5W';
# Time: 2024-12-08T05:55:34.319974Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    70
# Query_time: 2.179683  Lock_time: 0.000002 Rows_sent: 8  Rows_examined: 16
SET timestamp=1733637332;
SELECT id,
owner_id,
name,
access_token,
model,
is_active,
created_at,
updated_at,
IFNULL(total_distance, 0) AS total_distance,
total_distance_updated_at
FROM chairs
LEFT JOIN (SELECT chair_id,
                   SUM(IFNULL(distance, 0)) AS total_distance,
                   MAX(created_at)          AS total_distance_updated_at
            FROM (SELECT chair_id,
                         created_at,
                         ABS(latitude - LAG(latitude) OVER (PARTITION BY chair_id ORDER BY created_at)) +
                         ABS(longitude - LAG(longitude) OVER (PARTITION BY chair_id ORDER BY created_at)) AS distance
                  FROM chair_locations) tmp
            GROUP BY chair_id) distance_table ON distance_table.chair_id = chairs.id
WHERE owner_id = '01JEJDAX0M26HYQFSY454ES0NW';
# Time: 2024-12-08T05:55:34.322817Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:    43
# Query_time: 0.000340  Lock_time: 0.000002 Rows_sent: 1  Rows_examined: 0
SET timestamp=1733637334;
SELECT COUNT(*) = 0 FROM (SELECT COUNT(chair_sent_at) = 6 AS completed FROM ride_statuses WHERE ride_id IN (SELECT id FROM rides WHERE chair_id = '01JEJDCJSFX1KN7HBETZPN6JTA') GROUP BY ride_id) is_completed WHERE completed = FALSE;
# Time: 2024-12-08T05:55:34.874178Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:     9
# Query_time: 0.000349  Lock_time: 0.000002 Rows_sent: 1  Rows_examined: 1
SET timestamp=1733637334;
SELECT COUNT(*) = 0 FROM (SELECT COUNT(chair_sent_at) = 6 AS completed FROM ride_statuses WHERE ride_id IN (SELECT id FROM rides WHERE chair_id = '01JEJDAX1Y2Y6GQG7NXY91D9KA') GROUP BY ride_id) is_completed WHERE completed = FALSE;
# Time: 2024-12-08T05:55:34.874861Z
# User@Host: isucon[isucon] @ localhost [127.0.0.1]  Id:     9
# Query_time: 0.000260  Lock_time: 0.000002 Rows_sent: 1  Rows_examined: 0
SET timestamp=1733637334;
SELECT COUNT(*) = 0 FROM (SELECT COUNT(chair_sent_at) = 6 AS completed FROM ride_statuses WHERE ride_id IN (SELECT id FROM rides WHERE chair_id = '01JEJDBXMAH2N64FTGD4G1XJ24') GROUP BY ride_id) is_completed WHERE completed = FALSE;
# Time: 2024-12-08T05:56:34.008681Z
# User@Host: [] @  []  Id:    59
# Query_time: 0.004929  Lock_time: 0.000025 Rows_sent: 0  Rows_examined: 0
SET timestamp=1733637394;
throttle:         15 'index not used' warning(s) suppressed.;
